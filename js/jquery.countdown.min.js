(function(g){function r(){function a(k){k=1E12>k?d?performance.now()+performance.timing.navigationStart:b():k||b();1E3<=k-e&&(m._updateTargets(),e=k);c(a)}this.regional=[];this.regional[""]={labels:"Years Months Weeks Days Hours Minutes Seconds".split(" "),labels1:"Year Month Week Day Hour Minute Second".split(" "),compactLabels:["y","m","w","d"],whichLabels:null,digits:"0123456789".split(""),timeSeparator:":",isRTL:!1};this._defaults={until:null,since:null,timezone:null,serverSync:null,format:"dHMS",
layout:"",compact:!1,significant:0,description:"",expiryUrl:"",expiryText:"",alwaysExpire:!1,onExpiry:null,onTick:null,tickInterval:1};g.extend(this._defaults,this.regional[""]);this._serverSyncs=[];var b="function"==typeof Date.now?Date.now:function(){return(new Date).getTime()},d=window.performance&&"function"==typeof window.performance.now,c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||
null,e=0;!c||g.noRequestAnimationFrame?(g.noRequestAnimationFrame=null,setInterval(function(){m._updateTargets()},980)):(e=window.animationStartTime||window.webkitAnimationStartTime||window.mozAnimationStartTime||window.oAnimationStartTime||window.msAnimationStartTime||b(),c(a))}g.extend(r.prototype,{markerClassName:"hasCountdown",propertyName:"countdown",_rtlClass:"countdown_rtl",_sectionClass:"countdown_section",_amountClass:"countdown_amount",_rowClass:"countdown_row",_holdingClass:"countdown_holding",
_showClass:"countdown_show",_descrClass:"countdown_descr",_timerTargets:[],setDefaults:function(a){this._resetExtraLabels(this._defaults,a);g.extend(this._defaults,a||{})},UTCDate:function(a,b,d,c,e,k,h,p){"object"==typeof b&&b.constructor==Date&&(p=b.getMilliseconds(),h=b.getSeconds(),k=b.getMinutes(),e=b.getHours(),c=b.getDate(),d=b.getMonth(),b=b.getFullYear());var l=new Date;l.setUTCFullYear(b);l.setUTCDate(1);l.setUTCMonth(d||0);l.setUTCDate(c||1);l.setUTCHours(e||0);l.setUTCMinutes((k||0)-(30>
Math.abs(a)?60*a:a));l.setUTCSeconds(h||0);l.setUTCMilliseconds(p||0);return l},periodsToSeconds:function(a){return 31557600*a[0]+2629800*a[1]+604800*a[2]+86400*a[3]+3600*a[4]+60*a[5]+a[6]},_attachPlugin:function(a,b){a=g(a);if(!a.hasClass(this.markerClassName)){var d={options:g.extend({},this._defaults),_periods:[0,0,0,0,0,0,0]};a.addClass(this.markerClassName).data(this.propertyName,d);this._optionPlugin(a,b)}},_addTarget:function(a){this._hasTarget(a)||this._timerTargets.push(a)},_hasTarget:function(a){return-1<
g.inArray(a,this._timerTargets)},_removeTarget:function(a){this._timerTargets=g.map(this._timerTargets,function(b){return b==a?null:b})},_updateTargets:function(){for(var a=this._timerTargets.length-1;0<=a;a--)this._updateCountdown(this._timerTargets[a])},_optionPlugin:function(a,b,d){a=g(a);var c=a.data(this.propertyName);if(!b||"string"==typeof b&&null==d){var e=b;return(b=(c||{}).options)&&e?b[e]:b}a.hasClass(this.markerClassName)&&(b=b||{},"string"==typeof b&&(e=b,b={},b[e]=d),b.layout&&(b.layout=
b.layout.replace(/&lt;/g,"<").replace(/&gt;/g,">")),this._resetExtraLabels(c.options,b),d=c.options.timezone!=b.timezone,g.extend(c.options,b),this._adjustSettings(a,c,null!=b.until||null!=b.since||d),b=new Date,(c._since&&c._since<b||c._until&&c._until>b)&&this._addTarget(a[0]),this._updateCountdown(a,c))},_updateCountdown:function(a,b){var d=g(a);if(b=b||d.data(this.propertyName)){d.html(this._generateHTML(b)).toggleClass(this._rtlClass,b.options.isRTL);if(g.isFunction(b.options.onTick)){var c=
"lap"!=b._hold?b._periods:this._calculatePeriods(b,b._show,b.options.significant,new Date);1!=b.options.tickInterval&&0!=this.periodsToSeconds(c)%b.options.tickInterval||b.options.onTick.apply(a,[c])}if("pause"!=b._hold&&(b._since?b._now.getTime()<b._since.getTime():b._now.getTime()>=b._until.getTime())&&!b._expiring){b._expiring=!0;if(this._hasTarget(a)||b.options.alwaysExpire)this._removeTarget(a),g.isFunction(b.options.onExpiry)&&b.options.onExpiry.apply(a,[]),b.options.expiryText&&(c=b.options.layout,
b.options.layout=b.options.expiryText,this._updateCountdown(a,b),b.options.layout=c),b.options.expiryUrl&&(window.location=b.options.expiryUrl);b._expiring=!1}else"pause"==b._hold&&this._removeTarget(a);d.data(this.propertyName,b)}},_resetExtraLabels:function(a,b){var d=!1,c;for(c in b)if("whichLabels"!=c&&c.match(/[Ll]abels/)){d=!0;break}if(d)for(c in a)c.match(/[Ll]abels[02-9]|compactLabels1/)&&(a[c]=null)},_adjustSettings:function(a,b,d){for(var c=0,c=null,e=0;e<this._serverSyncs.length;e++)if(this._serverSyncs[e][0]==
b.options.serverSync){c=this._serverSyncs[e][1];break}null!=c?(c=b.options.serverSync?c:0,a=new Date):(c=g.isFunction(b.options.serverSync)?b.options.serverSync.apply(a,[]):null,a=new Date,c=c?a.getTime()-c.getTime():0,this._serverSyncs.push([b.options.serverSync,c]));e=b.options.timezone;e=null==e?-a.getTimezoneOffset():e;if(d||!d&&null==b._until&&null==b._since)b._since=b.options.since,null!=b._since&&(b._since=this.UTCDate(e,this._determineTime(b._since,null)),b._since&&c&&b._since.setMilliseconds(b._since.getMilliseconds()+
c)),b._until=this.UTCDate(e,this._determineTime(b.options.until,a)),c&&b._until.setMilliseconds(b._until.getMilliseconds()+c);b._show=this._determineShow(b)},_destroyPlugin:function(a){a=g(a);a.hasClass(this.markerClassName)&&(this._removeTarget(a[0]),a.removeClass(this.markerClassName).empty().removeData(this.propertyName))},_pausePlugin:function(a){this._hold(a,"pause")},_lapPlugin:function(a){this._hold(a,"lap")},_resumePlugin:function(a){this._hold(a,null)},_hold:function(a,b){var d=g.data(a,
this.propertyName);if(d){if("pause"==d._hold&&!b){d._periods=d._savePeriods;var c=d._since?"-":"+";d[d._since?"_since":"_until"]=this._determineTime(c+d._periods[0]+"y"+c+d._periods[1]+"o"+c+d._periods[2]+"w"+c+d._periods[3]+"d"+c+d._periods[4]+"h"+c+d._periods[5]+"m"+c+d._periods[6]+"s");this._addTarget(a)}d._hold=b;d._savePeriods="pause"==b?d._periods:null;g.data(a,this.propertyName,d);this._updateCountdown(a,d)}},_getTimesPlugin:function(a){return(a=g.data(a,this.propertyName))?"pause"==a._hold?
a._savePeriods:a._hold?this._calculatePeriods(a,a._show,a.options.significant,new Date):a._periods:null},_determineTime:function(a,b){var d=function(a){var b=new Date;b.setTime(b.getTime()+1E3*a);return b},c=function(a){a=a.toLowerCase();for(var b=new Date,c=b.getFullYear(),d=b.getMonth(),l=b.getDate(),f=b.getHours(),q=b.getMinutes(),b=b.getSeconds(),g=/([+-]?[0-9]+)\s*(s|m|h|d|w|o|y)?/g,n=g.exec(a);n;){switch(n[2]||"s"){case "s":b+=parseInt(n[1],10);break;case "m":q+=parseInt(n[1],10);break;case "h":f+=
parseInt(n[1],10);break;case "d":l+=parseInt(n[1],10);break;case "w":l+=7*parseInt(n[1],10);break;case "o":d+=parseInt(n[1],10);l=Math.min(l,m._getDaysInMonth(c,d));break;case "y":c+=parseInt(n[1],10),l=Math.min(l,m._getDaysInMonth(c,d))}n=g.exec(a)}return new Date(c,d,l,f,q,b,0)};(d=null==a?b:"string"==typeof a?c(a):"number"==typeof a?d(a):a)&&d.setMilliseconds(0);return d},_getDaysInMonth:function(a,b){return 32-(new Date(a,b,32)).getDate()},_normalLabels:function(a){return a},_generateHTML:function(a){var b=
this;a._periods=a._hold?a._periods:this._calculatePeriods(a,a._show,a.options.significant,new Date);for(var d=!1,c=0,e=a.options.significant,k=g.extend({},a._show),h=0;6>=h;h++)d|="?"==a._show[h]&&0<a._periods[h],k[h]="?"!=a._show[h]||d?a._show[h]:null,c+=k[h]?1:0,e-=0<a._periods[h]?1:0;for(var p=[!1,!1,!1,!1,!1,!1,!1],h=6;0<=h;h--)a._show[h]&&(a._periods[h]?p[h]=!0:(p[h]=0<e,e--));var l=a.options.compact?a.options.compactLabels:a.options.labels,f=a.options.whichLabels||this._normalLabels,d=function(c){var d=
a.options["compactLabels"+f(a._periods[c])];return k[c]?b._translateDigits(a,a._periods[c])+(d?d[c]:l[c])+" ":""},e=function(c){var d=a.options["labels"+f(a._periods[c])];return!a.options.significant&&k[c]||a.options.significant&&p[c]?'<span class="'+m._sectionClass+'"><span class="'+m._amountClass+'">'+b._translateDigits(a,a._periods[c])+"</span><br/>"+(d?d[c]:l[c])+"</span>":""};return a.options.layout?this._buildLayout(a,k,a.options.layout,a.options.compact,a.options.significant,p):(a.options.compact?
'<span class="'+this._rowClass+" "+this._amountClass+(a._hold?" "+this._holdingClass:"")+'">'+d(0)+d(1)+d(2)+d(3)+(k[4]?this._minDigits(a,a._periods[4],2):"")+(k[5]?(k[4]?a.options.timeSeparator:"")+this._minDigits(a,a._periods[5],2):"")+(k[6]?(k[4]||k[5]?a.options.timeSeparator:"")+this._minDigits(a,a._periods[6],2):""):'<span class="'+this._rowClass+" "+this._showClass+(a.options.significant||c)+(a._hold?" "+this._holdingClass:"")+'">'+e(0)+e(1)+e(2)+e(3)+e(4)+e(5)+e(6))+"</span>"+(a.options.description?
'<span class="'+this._rowClass+" "+this._descrClass+'">'+a.options.description+"</span>":"")},_buildLayout:function(a,b,d,c,e,k){var h=a.options[c?"compactLabels":"labels"],p=a.options.whichLabels||this._normalLabels,l=function(b){return(a.options[(c?"compactLabels":"labels")+p(a._periods[b])]||h)[b]},f=function(b,c){return a.options.digits[Math.floor(b/c)%10]},l={desc:a.options.description,sep:a.options.timeSeparator,yl:l(0),yn:this._minDigits(a,a._periods[0],1),ynn:this._minDigits(a,a._periods[0],
2),ynnn:this._minDigits(a,a._periods[0],3),y1:f(a._periods[0],1),y10:f(a._periods[0],10),y100:f(a._periods[0],100),y1000:f(a._periods[0],1E3),ol:l(1),on:this._minDigits(a,a._periods[1],1),onn:this._minDigits(a,a._periods[1],2),onnn:this._minDigits(a,a._periods[1],3),o1:f(a._periods[1],1),o10:f(a._periods[1],10),o100:f(a._periods[1],100),o1000:f(a._periods[1],1E3),wl:l(2),wn:this._minDigits(a,a._periods[2],1),wnn:this._minDigits(a,a._periods[2],2),wnnn:this._minDigits(a,a._periods[2],3),w1:f(a._periods[2],
1),w10:f(a._periods[2],10),w100:f(a._periods[2],100),w1000:f(a._periods[2],1E3),dl:l(3),dn:this._minDigits(a,a._periods[3],1),dnn:this._minDigits(a,a._periods[3],2),dnnn:this._minDigits(a,a._periods[3],3),d1:f(a._periods[3],1),d10:f(a._periods[3],10),d100:f(a._periods[3],100),d1000:f(a._periods[3],1E3),hl:l(4),hn:this._minDigits(a,a._periods[4],1),hnn:this._minDigits(a,a._periods[4],2),hnnn:this._minDigits(a,a._periods[4],3),h1:f(a._periods[4],1),h10:f(a._periods[4],10),h100:f(a._periods[4],100),
h1000:f(a._periods[4],1E3),ml:l(5),mn:this._minDigits(a,a._periods[5],1),mnn:this._minDigits(a,a._periods[5],2),mnnn:this._minDigits(a,a._periods[5],3),m1:f(a._periods[5],1),m10:f(a._periods[5],10),m100:f(a._periods[5],100),m1000:f(a._periods[5],1E3),sl:l(6),sn:this._minDigits(a,a._periods[6],1),snn:this._minDigits(a,a._periods[6],2),snnn:this._minDigits(a,a._periods[6],3),s1:f(a._periods[6],1),s10:f(a._periods[6],10),s100:f(a._periods[6],100),s1000:f(a._periods[6],1E3)},q=d;for(d=0;6>=d;d++)f="yowdhms".charAt(d),
q=q.replace(new RegExp("\\{"+f+"<\\}([\\s\\S]*)\\{"+f+">\\}","g"),!e&&b[d]||e&&k[d]?"$1":"");g.each(l,function(a,b){q=q.replace(new RegExp("\\{"+a+"\\}","g"),b)});return q},_minDigits:function(a,b,d){b=""+b;if(b.length>=d)return this._translateDigits(a,b);b="0000000000"+b;return this._translateDigits(a,b.substr(b.length-d))},_translateDigits:function(a,b){return(""+b).replace(/[0-9]/g,function(b){return a.options.digits[b]})},_determineShow:function(a){a=a.options.format;var b=[];b[0]=a.match("y")?
"?":a.match("Y")?"!":null;b[1]=a.match("o")?"?":a.match("O")?"!":null;b[2]=a.match("w")?"?":a.match("W")?"!":null;b[3]=a.match("d")?"?":a.match("D")?"!":null;b[4]=a.match("h")?"?":a.match("H")?"!":null;b[5]=a.match("m")?"?":a.match("M")?"!":null;b[6]=a.match("s")?"?":a.match("S")?"!":null;return b},_calculatePeriods:function(a,b,d,c){a._now=c;a._now.setMilliseconds(0);var e=new Date(a._now.getTime());a._since?c.getTime()<a._since.getTime()?a._now=c=e:c=a._since:(e.setTime(a._until.getTime()),c.getTime()>
a._until.getTime()&&(a._now=c=e));var k=[0,0,0,0,0,0,0];if(b[0]||b[1]){var h=m._getDaysInMonth(c.getFullYear(),c.getMonth()),g=m._getDaysInMonth(e.getFullYear(),e.getMonth()),g=e.getDate()==c.getDate()||e.getDate()>=Math.min(h,g)&&c.getDate()>=Math.min(h,g),l=function(a){return 60*(60*a.getHours()+a.getMinutes())+a.getSeconds()},g=Math.max(0,12*(e.getFullYear()-c.getFullYear())+e.getMonth()-c.getMonth()+(e.getDate()<c.getDate()&&!g||g&&l(e)<l(c)?-1:0));k[0]=b[0]?Math.floor(g/12):0;k[1]=b[1]?g-12*
k[0]:0;c=new Date(c.getTime());h=c.getDate()==h;g=m._getDaysInMonth(c.getFullYear()+k[0],c.getMonth()+k[1]);c.getDate()>g&&c.setDate(g);c.setFullYear(c.getFullYear()+k[0]);c.setMonth(c.getMonth()+k[1]);h&&c.setDate(g)}var f=Math.floor((e.getTime()-c.getTime())/1E3);c=function(a,c){k[a]=b[a]?Math.floor(f/c):0;f-=k[a]*c};c(2,604800);c(3,86400);c(4,3600);c(5,60);c(6,1);if(0<f&&!a._since)for(a=[1,12,4.3482,7,24,60,60],c=6,e=1,h=6;0<=h;h--)b[h]&&(k[c]>=e&&(k[c]=0,f=1),0<f&&(k[h]++,f=0,c=h,e=1)),e*=a[h];
if(d)for(h=0;6>=h;h++)d&&k[h]?d--:d||(k[h]=0);return k}});var t=["getTimes"];g.fn.countdown=function(a){var b=Array.prototype.slice.call(arguments,1),d;d="option"==a&&(0==b.length||1==b.length&&"string"==typeof b[0])?!0:-1<g.inArray(a,t);return d?m["_"+a+"Plugin"].apply(m,[this[0]].concat(b)):this.each(function(){if("string"==typeof a){if(!m["_"+a+"Plugin"])throw"Unknown command: "+a;m["_"+a+"Plugin"].apply(m,[this].concat(b))}else m._attachPlugin(this,a||{})})};var m=g.countdown=new r})(jQuery);
